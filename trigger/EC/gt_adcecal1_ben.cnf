#########################
# trig1 Crate
#########################

TS_CRATE trig1

TS_FIBER_DELAY_OFFSET 0x80 0xcf
TS_BLOCK_LEVEL 1
TS_BUFFER_LEVEL 1

TS_HOLDOFF 1 60 1
TS_HOLDOFF 2 60 1
TS_HOLDOFF 3 60 1
TS_HOLDOFF 4 60 1

TS_INPUT_PRESCALE 1 0
TS_INPUT_PRESCALE 2 0
TS_INPUT_PRESCALE 3 0
TS_INPUT_PRESCALE 4 0
TS_INPUT_PRESCALE 5 0
TS_INPUT_PRESCALE 6 0

TS_INPUT_MASK 1 1 1 1 1 1

# first arg: 0-disable, 1-enable; second arg: prescale (7-3.5kHz, 3-60kHz)
TS_RANDOM_TRIGGER 0 9

TS_CRATE end

#########################
# trig2 Crate
#########################

### TI
TI_CRATE trig2

TI_FIBER_DELAY_OFFSET 0x80 0xcf

TI_CRATE end




### VTP
VTP_CRATE trig2vtp

VTP_W_OFFSET 7300
VTP_W_WIDTH 400

#        slot: 10 13  9 14  8 15  7 16  6 17  5 18  4 19  3 20
#     payload:  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16
VTP_PAYLOAD_EN  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0

#      fiber:  1  2  3  4
VTP_FIBER_EN   0  0  0  0

VTP_GT_LATENCY 6000

VTP_GT_WIDTH   16

VTP_GT_TRGBIT  0 15 63 1 1

VTP_CRATE end




### SSP
SSP_CRATE trig2

SSP_SLOT all

SSP_W_OFFSET 7300
SSP_W_WIDTH  400

SSP_GT_LATENCY            4000
SSP_GT_ECAL_ESUM_DELAY    0
SSP_GT_ECAL_CLUSTER_DELAY 0
SSP_GT_ECAL_ESUM_INTWIDTH 40
SSP_GT_PCAL_ESUM_DELAY    0
SSP_GT_PCAL_CLUSTER_DELAY 0
SSP_GT_PCAL_ESUM_INTWIDTH 40

# Sector Trigger bit 0
SSP_GT_STRG_EN                        0  1

SSP_GT_STRG_PCAL_CLUSTER_EMIN_EN      0  0
SSP_GT_STRG_PCAL_CLUSTER_EMIN         0  0
SSP_GT_STRG_PCAL_CLUSTER_WIDTH        0  0

SSP_GT_STRG_ECALOUT_CLUSTER_EMIN_EN   0  0
SSP_GT_STRG_ECALOUT_CLUSTER_EMIN      0  0
SSP_GT_STRG_ECALOUT_CLUSTER_WIDTH     0  0

SSP_GT_STRG_ECALIN_CLUSTER_EMIN_EN    0  1
SSP_GT_STRG_ECALIN_CLUSTER_EMIN       0  100
SSP_GT_STRG_ECALIN_CLUSTER_WIDTH      0  40

SSP_GT_STRG_PCAL_ESUM_EN              0  0
SSP_GT_STRG_ECAL_ESUM_EN              0  0

SSP_GT_STRG_ECAL_ESUM_MIN             0  0
SSP_GT_STRG_ECAL_ESUM_WIDTH           0  0

SSP_GT_STRG_PCAL_ESUM_MIN             0  0
SSP_GT_STRG_PCAL_ESUM_WIDTH           0  0

SSP_CRATE end


#########################
# adcecal1 Crate
#########################

### TI
TI_CRATE adcecal1

TI_FIBER_DELAY_OFFSET 0x80 0xcf

TI_CRATE end




### VTP
VTP_CRATE adcecal1vtp

VTP_W_OFFSET 7300
VTP_W_WIDTH 400

#        slot: 10 13  9 14  8 15  7 16  6 17  5 18  4 19  3 20
#     payload:  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16
VTP_PAYLOAD_EN  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1

#      fiber:  1  2  3  4
VTP_FIBER_EN   1  0  0  0

VTP_EC_FADCSUM_CH 0xFFFFFFFF 0xFFFFFFFF 0xFFFFFFFF 0xFFFF0FFF 0xFFFFFFFF 0xFFFFFFFF 0xFFFFFFFF 0x000000000

VTP_ECINNER_HIT_EMIN     100
VTP_ECINNER_HIT_DT       8
VTP_ECINNER_HIT_DALITZ   0    1023

VTP_ECOUTER_HIT_EMIN     100
VTP_ECOUTER_HIT_DT       8
VTP_ECOUTER_HIT_DALITZ   0    1023

VTP_CRATE end




### FADC
FADC250_CRATE adcecal1

FADC250_SLOT all
FADC250_DAC  3300

FADC250_W_OFFSET 7300
FADC250_W_WIDTH 400

#raw mode
FADC250_MODE      1

FADC250_NSB       12
FADC250_NSA       80
FADC250_NPEAK     1

#       channel:        0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
FADC250_ADC_MASK        1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TRG_MASK        1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TET_IGNORE_MASK 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0

FADC250_GAIN 1.0

FADC250_TET 200


# include trigger/EC/adcecal1_peds.cnf

FADC250_SLOT 3
FADC250_ALLCH_PED   90.548  132.102   90.383  121.421   89.761  104.970  135.415  107.970  109.829   98.191   88.543   98.789   81.389  128.483  108.467   82.497
FADC250_SLOT 4
FADC250_ALLCH_PED  110.985  109.525  114.461  122.347   91.529  110.211  126.143  110.979  115.448  110.612  109.593   93.795   98.480  121.681   87.854  101.879
FADC250_SLOT 5
FADC250_ALLCH_PED  119.060   77.178   66.544  123.284  120.972   90.730  122.974  101.640   96.148  103.314  134.271  102.484  107.668  108.871  109.983   99.206
FADC250_SLOT 6
FADC250_ALLCH_PED  116.912  104.352  130.963  105.347   96.361  137.281  146.122   94.375  102.743  112.446  140.278  161.615  163.982   96.198  112.563  118.731
FADC250_SLOT 7
FADC250_ALLCH_PED   85.821   63.718  125.020   84.216  108.610  142.875   93.262   89.682   76.391   96.098   86.467   55.391   96.208   89.080   75.355  111.200
FADC250_SLOT 8
FADC250_ALLCH_PED  108.733   77.591  105.200  124.013  113.695  110.877  105.649  103.885   89.059  138.783  119.323  118.750  103.248  116.646   84.801  102.980
FADC250_SLOT 9
FADC250_ALLCH_PED   83.364  105.001  115.441   71.163   68.098   98.169   92.015   65.866   94.108   91.861  120.953   82.820  118.015   65.858   90.912  144.038
FADC250_SLOT 10
FADC250_ALLCH_PED   99.642   99.994  126.105  115.933  102.871  119.017  121.317  116.239  102.750  109.440  121.774  115.592  125.970  130.164  120.837  117.112
FADC250_SLOT 13
FADC250_ALLCH_PED   97.670  118.957  133.291   97.147   86.774  109.005  119.595  135.670  148.763  107.577   84.849  119.829  159.188   89.396  114.970  154.516
FADC250_SLOT 14
FADC250_ALLCH_PED   49.173   79.137   90.552   89.987  108.758   90.362   72.494  104.502  123.515  113.510   74.112   98.035   50.626   77.521  102.779  101.985
FADC250_SLOT 15
FADC250_ALLCH_PED   94.939  114.271   98.608  100.611   71.940  136.680   75.225   97.911   74.322   93.115  102.334   91.671   69.776   90.127  107.901  106.338
FADC250_SLOT 16
FADC250_ALLCH_PED  140.324   91.327   96.281   61.318  107.628  117.953  112.987  114.945   74.034  118.177  109.228   81.316  106.218   96.290  112.465   87.828
FADC250_SLOT 17
FADC250_ALLCH_PED   89.634  108.599  106.714  104.905  123.484  105.414  116.513   98.233   98.863  104.908  161.283  105.809  146.035  110.956  113.838  120.830
FADC250_SLOT 18
FADC250_ALLCH_PED  103.725  106.551  108.972  113.029   92.134   97.833   98.754  123.905   93.237   92.875  105.382   95.871  202.554  218.763  198.985  185.868
FADC250_SLOT 19
FADC250_ALLCH_PED  215.071  190.576  193.826  195.892  202.797  173.398  203.271  180.432  242.746  213.683  177.363  164.028  210.866  197.650  185.400  189.135
FADC250_SLOT 20
FADC250_ALLCH_PED  186.866  163.200  188.493  217.662  180.824  183.813  211.253  214.508  202.022  205.249  215.104  200.117  209.335  189.165  198.032  198.162

FADC250_CRATE end

