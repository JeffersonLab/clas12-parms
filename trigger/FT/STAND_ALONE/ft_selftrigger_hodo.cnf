#A.C. comments on 10/8/2017
#
#FADC250_TRG_MINTOT  1  <- minimum number of 4ns clocks channel must be over threshold 
#                          to count towards multiplicity for FADC
#FADC250_TRG_MINMULT 1  <- minimum number of channels triggered simultaneously for FADC 
#                          to send trigger to SD
#FADC250_TRG_WIDTH   1  <- stretches pulse width of channel over threshold in 4ns ticks
#

#########################
# adcft1 Crate
#########################

### TI
TI_CRATE adcft1

TI_FIBER_DELAY_OFFSET 0x80 0xcf
TI_BUFFER_LEVEL 1
TI_BLOCK_LEVEL  1
TI_INPUT_MASK 1 1 1 1 1 1

## HOLD OFF
# 1.44 us holdoff:
TI_HOLDOFF 1 3 1
# 4 triggers in 10*3840ns
TI_HOLDOFF 4 10 1



#TI_RANDOM_TRIGGER 1 13

# PRESCALE-FACTOR = 2**N

TI_INPUT_PRESCALE 1  0
TI_INPUT_PRESCALE 2  0
TI_INPUT_PRESCALE 3  0
TI_INPUT_PRESCALE 4  0
TI_INPUT_PRESCALE 5  0
TI_INPUT_PRESCALE 6  0

TI_CRATE end

### FADC
FADC250_CRATE adcft1

FADC250_SLOT all
FADC250_DAC  3300
#when decreased, ADC pulse moves left
## setting for LED flasher: OFFSET=940, WIDTH=400
## setting for cosmics: OFFSET=1150, WIDTH=400

## new setting for cosmics: OFFSET = 1400?
## new setting for LED: OFFSET = 1190?
## new setting for Mid Values: OFFSET = 1295?
FADC250_W_OFFSET 1400
FADC250_W_WIDTH 400

#raw mode
FADC250_MODE      1
FADC250_NSB       20
FADC250_NSA       400
FADC250_NPEAK     1

#pulse mode
##FADC250_MODE      3
##FADC250_NSB       20
##FADC250_NSA       120
##FADC250_NPEAK     3

#       channel:        0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
FADC250_ADC_MASK        1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TRG_MASK        1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TET_IGNORE_MASK 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TRG_WIDTH       100
FADC250_TRG_MINTOT      1
FADC250_TRG_MINMULT     1

FADC250_GAIN 1.0

# Note:
# 1) threshold used here is for both readout and triggering
# 2) if no zero suppresion is desired (i.e. want to readout all channels)
#    then set FADC250_TET_IGNORE_MASK to all 1s and this will ignore
#    the threshold value for readout and only use it for triggering
# 3) this threshold is relative to the fadc pedestal/offsets used
FADC250_TET 50
#FADC250_TET 0

#ADCFT1 THRESHOLD ADJUSTMENTS AND FADC MULTIPLICITY SETTINGS 
#Channels with higher thresholds
FADC250_SLOT 3
FADC250_TRG_MINMULT     3

FADC250_SLOT 4
FADC250_TRG_MINMULT     3

FADC250_SLOT 5
FADC250_TRG_MINMULT     6

FADC250_SLOT 6
FADC250_TRG_MINMULT     6
FADC250_TRG_MASK        1  1  1  1  1  1  1  1  1  1  1  0  1  1  1  1

FADC250_SLOT 7
FADC250_TRG_MINMULT     3
FADC250_TRG_MASK        1  1  1  1  1  1  1  1  1  1  1  0  1  1  0  1

FADC250_SLOT 8
FADC250_TRG_MINMULT     3

FADC250_SLOT 9
FADC250_TRG_MINMULT     7

FADC250_SLOT 10
FADC250_TRG_MINMULT     5

FADC250_SLOT 13
FADC250_TRG_MINMULT     4

FADC250_SLOT 14
FADC250_TRG_MINMULT     3

FADC250_SLOT 15
FADC250_TRG_MINMULT     1

##########################


# include trigger/PEDS/hv_on/adcft1_ped.cnf

FADC250_SLOT 3
FADC250_ALLCH_PED  177.906  170.621  201.975  227.809  215.790  232.795  214.993  191.968  186.313  173.973  204.550  222.766  175.847  175.713  172.148  194.662
FADC250_SLOT 4
FADC250_ALLCH_PED  171.847  187.301  187.001  176.049  185.508  165.493  170.540  166.077  190.064  163.422  233.571  230.896  195.607  169.498  185.809  161.153
FADC250_SLOT 5
FADC250_ALLCH_PED  180.904  193.786  189.091  166.608  193.904  221.408  208.543  186.727  204.096  167.861  202.116  235.018  204.123  196.758  206.204  174.262
FADC250_SLOT 6
FADC250_ALLCH_PED  175.869  233.042  190.252  210.984  191.270  177.593  212.819  192.993  169.421  213.465  207.230  202.723  202.888  201.337  171.775  209.552
FADC250_SLOT 7
FADC250_ALLCH_PED  149.211  173.347  141.702  181.027  157.187  186.137  173.070  211.562  159.587  197.846  166.256  158.807  171.695  191.528  174.790  184.921
FADC250_SLOT 8
FADC250_ALLCH_PED  175.473  198.637  214.513  185.229  228.014  191.906  147.087  183.213  188.847  207.003  215.496  194.264  177.849  201.347  193.902  181.100
FADC250_SLOT 9
FADC250_ALLCH_PED  188.686  196.495  209.309  212.625  195.187  193.800  204.520  193.002  163.666  212.051  171.415  173.422  186.557  188.445  203.843  180.512
FADC250_SLOT 10
FADC250_ALLCH_PED  194.422  179.409  191.215  200.472  167.163  193.557  188.827  194.480  206.970  215.629  207.877  235.117  215.017  206.068  213.937  201.559
FADC250_SLOT 13
FADC250_ALLCH_PED  185.531  228.907  219.258  216.613  205.426  224.380  226.402  225.263  227.267  232.716  202.630  185.784  216.438  223.807  194.643  207.842
FADC250_SLOT 14
FADC250_ALLCH_PED  221.923  178.496  189.729  193.929  234.322  216.707  187.411  228.719  217.772  247.649  187.035  151.621  193.387  214.161  195.449  165.924
FADC250_SLOT 15
FADC250_ALLCH_PED  196.110  197.520  180.709  203.038  187.286  195.674  230.961  200.297  213.706  194.403  212.391  241.305  197.264  199.265  200.250  201.125


FADC250_CRATE end


#########################
# adcft2 Crate
#########################

### TI
TI_CRATE adcft2

TI_FIBER_DELAY_OFFSET 0x80 0xcf

TI_CRATE end

### FADC
FADC250_CRATE adcft2

FADC250_SLOT all
FADC250_DAC  3300
#when decreased, ADC pulse moves left
## setting for LED flasher: OFFSET=950, WIDTH=400
## setting for cosmics: OFFSET=1150, WIDTH=400

## new setting for cosmics: OFFSET = 1400?
## new setting for LED: OFFSET = 1200?
## new setting for Mid Values: OFFSET = 1295?
FADC250_W_OFFSET 1400
FADC250_W_WIDTH 400

#raw mode
FADC250_MODE      1
FADC250_NSB       20
FADC250_NSA       400
FADC250_NPEAK     1

#pulse mode
##FADC250_MODE      3
##FADC250_NSB       20
##FADC250_NSA       120
##FADC250_NPEAK     3

#       channel:        0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
FADC250_ADC_MASK        1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TRG_MASK        1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TET_IGNORE_MASK 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TRG_WIDTH       100
FADC250_TRG_MINTOT      5
FADC250_TRG_MINMULT     1

FADC250_GAIN 1.0

# Note:
# 1) threshold used here is for both readout and triggering
# 2) if no zero suppresion is desired (i.e. want to readout all channels)
#    then set FADC250_TET_IGNORE_MASK to all 1s and this will ignore
#    the threshold value for readout and only use it for triggering
# 3) this threshold is relative to the fadc pedestal/offsets used
#FADC250_SLOT ##
#FADC250_TET_IGNORE_MASK 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  
FADC250_TET 6
#FADC250_TET 0


#ADCFT2 THRESHOLD ADJUSTMENTS AND FADC MULTIPLICITY SETTINGS 
#Channels with higher thresholds 
FADC250_SLOT 3
FADC250_TRG_MINMULT     3
#FADC250_CH_TET    5     25

FADC250_SLOT 4
FADC250_TRG_MINMULT     3
#FADC250_CH_TET    9     15

FADC250_SLOT 5
FADC250_TRG_MINMULT     6
FADC250_TRG_MASK        1  1  1  1  1  1  1  1  1  1  1  1  1  0  1  1


FADC250_SLOT 6
FADC250_TRG_MINMULT     6

FADC250_SLOT 7
FADC250_TRG_MINMULT     3

FADC250_SLOT 8
FADC250_TRG_MINMULT     3

FADC250_SLOT 9
FADC250_TRG_MINMULT     7
FADC250_TRG_MASK        1  1  1  1  1  0  1  1  1  1  0  1  1  1  1  1


FADC250_SLOT 10
FADC250_TRG_MINMULT     5
FADC250_TRG_MASK        1  0  1  0  1  1  1  1  1  1  1  0  1  1  1  1

FADC250_SLOT 13
FADC250_TRG_MINMULT     4

FADC250_SLOT 14
FADC250_TRG_MINMULT     3
FADC250_TRG_MASK        1  1  0  1  1  1  1  1  1  1  1  1  1  1  1  1

##########################




# include trigger/PEDS/hv_on/adcft2_ped.cnf

FADC250_SLOT 3
FADC250_ALLCH_PED  207.923  181.825  212.486  186.950  211.155  189.443  204.270  182.762  197.493  191.067  196.050  216.852  171.493  198.989  181.651  211.217
FADC250_SLOT 4
FADC250_ALLCH_PED  208.811  150.956  152.055  164.767  191.918  175.678  181.278  187.777  170.492  202.703  220.202  171.270  187.150  158.526  199.301  221.201
FADC250_SLOT 5
FADC250_ALLCH_PED  202.898  210.030  201.771  201.944  189.438  218.105  156.208  170.743  204.952  230.230  192.700  158.473  202.231  195.861  173.227  195.575
FADC250_SLOT 6
FADC250_ALLCH_PED  210.549  242.910  210.126  184.666  219.091  219.847  231.139  202.018  201.429  223.502  220.159  206.798  244.305  234.625  235.864  236.945
FADC250_SLOT 7
FADC250_ALLCH_PED  185.777  177.264  199.489  180.235  179.320  207.792  188.812  214.847  195.934  189.568  208.613  195.610  173.346  192.207  212.750  200.186
FADC250_SLOT 8
FADC250_ALLCH_PED  180.733  217.573  145.269  190.336  229.798  169.700  195.709  159.982  195.041  180.507  178.518  220.465  208.345  199.818  169.218  233.803
FADC250_SLOT 9
FADC250_ALLCH_PED  217.288  198.413  209.813  175.063  188.080  180.490  173.213  179.055  198.948  219.779  154.104  176.910  184.431  169.399  204.439  175.367
FADC250_SLOT 10
FADC250_ALLCH_PED  217.584  219.594  199.317  185.039  209.218  220.213  173.840  181.768  199.318  227.795  190.671  205.169  187.746  225.134  180.760  219.451
FADC250_SLOT 13
FADC250_ALLCH_PED  194.590  195.279  204.075  218.612  189.171  200.629  216.503  204.157  193.753  221.961  181.569  234.295  179.276  182.137  194.259  187.234
FADC250_SLOT 14
FADC250_ALLCH_PED  188.026  166.616  199.457  140.538  141.130  205.927  231.594  204.797  189.224  201.316  176.397  209.593  203.466  172.255  199.010  195.539

FADC250_CRATE end


#########################
# adcft3 Crate
#########################

### TI
TI_CRATE adcft3

TI_FIBER_DELAY_OFFSET 0x80 0xcf
TI_INPUT_MASK 1 1 1 1 1 1
TI_BUFFER_LEVEL 1
TI_BLOCK_LEVEL  1


TI_INPUT_PRESCALE 1  0
TI_INPUT_PRESCALE 2  0
TI_INPUT_PRESCALE 3  0
TI_INPUT_PRESCALE 4  0
TI_INPUT_PRESCALE 5  0
TI_INPUT_PRESCALE 6  0


TI_CRATE end

### FADC
FADC250_CRATE adcft3

FADC250_SLOT all
FADC250_DAC  3300
#when decreased, ADC pulse moves left
## setting for LED flasher: OFFSET=1000, WIDTH=400
## setting for cosmics: OFFSET=1150, WIDTH=400
FADC250_W_OFFSET 1300
FADC250_W_WIDTH 400

#raw mode
FADC250_MODE      1
FADC250_NSB       20
FADC250_NSA       400
FADC250_NPEAK     1

#pulse mode
##FADC250_MODE      3
##FADC250_NSB       20
##FADC250_NSA       120
##FADC250_NPEAK     3

#       channel:        0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
FADC250_ADC_MASK        1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TRG_MASK        1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
#FADC250_TET_IGNORE_MASK 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
FADC250_TET_IGNORE_MASK 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
FADC250_TRG_WIDTH       100
FADC250_TRG_MINTOT      5
FADC250_TRG_MINMULT     2

FADC250_GAIN 1.0

# Note:
# 1) threshold used here is for both readout and triggering
# 2) if no zero suppresion is desired (i.e. want to readout all channels)
#    then set FADC250_TET_IGNORE_MASK to all 1s and this will ignore
#    the threshold value for readout and only use it for triggering
# 3) this threshold is relative to the fadc pedestal/offsets used
FADC250_TET  50
#FADC250_TET 0


# include trigger/PEDS/hv_on/adcft3_ped.cnf

FADC250_SLOT 3
FADC250_ALLCH_PED  165.265  150.652  191.760  169.235  210.171  239.140  210.629  203.251  181.249  196.780  175.447  170.801  193.187  176.055  196.909  187.061
FADC250_SLOT 4
FADC250_ALLCH_PED  199.493  273.222  369.037  173.652  200.141  215.911  197.189  207.548  190.992  168.982  227.176  197.202  169.011  201.322  179.117  222.171
FADC250_SLOT 5
FADC250_ALLCH_PED  209.529  186.806  225.199  195.088  102.509  208.829  221.288   93.696  196.647  225.660  225.025  215.387  208.707  203.730  237.810  208.404
FADC250_SLOT 6
FADC250_ALLCH_PED  191.744  200.740  184.571  181.545  135.225  201.432  199.437  186.536  219.766  211.788  218.326  204.276  169.375  222.766  189.588  194.181
FADC250_SLOT 7
FADC250_ALLCH_PED  193.291  233.771  211.736  203.519  209.404  214.365  209.261  211.714  216.671  212.644  232.023  224.911  207.291  205.660  218.950  223.455
FADC250_SLOT 8
FADC250_ALLCH_PED  197.451  191.081  170.921  169.867  148.552  199.463  184.436  200.271  211.496  212.510  208.582  208.140  207.007  197.611  227.458  190.631
FADC250_SLOT 9
FADC250_ALLCH_PED  229.864  172.201  170.057  198.473  174.052  177.109  185.279  217.160  207.618  191.749  171.903  196.924  173.815  192.343  179.288  209.130
FADC250_SLOT 10
FADC250_ALLCH_PED  193.779  216.595  207.403  224.388  201.811  215.932  212.914  170.912  209.123  231.203  210.381  205.162  198.702  203.344  187.816  228.975
FADC250_SLOT 13
FADC250_ALLCH_PED  226.280  177.165  174.785  184.113  223.674  207.917  230.104  225.863  240.380  204.697  182.599  180.742  188.150  208.862  209.444  199.280
FADC250_SLOT 14
FADC250_ALLCH_PED  189.392  215.718  202.758  206.934  209.834  198.482  225.798  211.147  187.834  202.942  188.945  202.340  210.241  237.428  232.447  193.982
FADC250_SLOT 15
FADC250_ALLCH_PED  214.853  196.559  183.246  205.132  220.547  210.217  225.085  208.536  206.058  200.632  183.446  200.256  205.600  205.400  229.407  215.074
FADC250_SLOT 16
FADC250_ALLCH_PED  181.473  200.825  212.493  179.498  200.738  201.131  200.143  203.414  224.596  196.494  152.526  207.256  162.902  206.368  173.901  155.851
FADC250_SLOT 17
FADC250_ALLCH_PED  207.539  222.683  192.745  178.561  202.161  179.752  194.698  172.454  210.810  182.661  215.748  236.293  175.244  199.209  200.211  202.426
FADC250_SLOT 18
FADC250_ALLCH_PED  214.664  199.769  192.628  188.646  190.767  185.089  208.692  212.094  225.046  206.694  196.524  241.537  201.317  180.219  195.567  200.588
FADC250_SLOT 19
FADC250_ALLCH_PED  189.912  197.602  177.433  218.459  234.587  200.843  217.229  220.421  184.734  180.998  225.700  184.401  201.921  213.910  177.800  196.136

FADC250_CRATE end


